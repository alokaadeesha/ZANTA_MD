const { cmd } = require("../command");
const config = require("../config"); 

// üéØ Truth and Dare Questions/Challenges Lists (Sinhala & English mixed)
const truths = [
    "‡∂î‡∂∂ ‡∂Ö‡∑Ä‡∑É‡∑è‡∂± ‡∑Ä‡∂ª‡∂ß ‡∂∂‡∑ú‡∂ª‡∑î ‡∂ö‡∑ì‡∑Ä‡∑ö ‡∂ö‡∑î‡∂∏‡∂ö‡∑ä ‡∂ú‡∑ê‡∂±‡∂Ø?",
    "‡∂î‡∂∂‡∂ß ‡∂¢‡∑ì‡∑Ä‡∑í‡∂≠‡∂∫‡∑ö ‡∂±‡∑ê‡∑Ä‡∂≠ ‡∂ö‡∑Ö ‡∂±‡∑ú‡∑Ñ‡∑ê‡∂ö‡∑í ‡∂∫‡∑ê‡∂∫‡∑í ‡∑Ñ‡∑ê‡∂ü‡∑ô‡∂± ‡∂±‡∂ª‡∂ö‡∂∏ ‡∂Ø‡∑ô‡∂∫ ‡∂ö‡∑î‡∂∏‡∂ö‡∑ä‡∂Ø?",
    "‡∂î‡∂∂ ‡∂î‡∂∂‡∑ö WhatsApp Chat ‡∂ë‡∂ö‡∑ö‡∂Ø‡∑ì ‡∂∫‡∂∏‡∑ô‡∂ö‡∑î‡∂ß ‡∂∫‡∑ê‡∑Ä‡∑ì‡∂∏‡∂ß ‡∂±‡∑ú‡∑Ñ‡∑ê‡∂ö‡∑í ‡∑Ä‡∑ñ ‡∂¥‡∂´‡∑í‡∑Ä‡∑í‡∂©‡∂∫‡∂ö‡∑ä ‡∂ö‡∑î‡∂∏‡∂ö‡∑ä‡∂Ø?",
    "‡∂î‡∂∂‡∂ß ‡∂ª‡∑Ñ‡∑É‡∑í‡∂±‡∑ä crush ‡∂ë‡∂ö‡∂ö‡∑ä ‡∂á‡∂≠‡∑í ‡∂ö‡∑ô‡∂±‡∑è ‡∂ö‡∑Ä‡∑î‡∂Ø? (Group ‡∂ë‡∂ö‡∑ö ‡∂ö‡∑ô‡∂±‡∑ô‡∂ö‡∑ä ‡∂±‡∂∏‡∑ä @ ‡∂ö‡∂ª‡∂±‡∑ä‡∂±.)",
    "‡∂î‡∂∂‡∂ß ‡∂¥‡∑è‡∑É‡∑ê‡∂Ω‡∑ö‡∂Ø‡∑ì ‡∑Ñ‡∑ù ‡∂ª‡∑ê‡∂ö‡∑í‡∂∫‡∑è ‡∑É‡∑ä‡∂Æ‡∑è‡∂±‡∂∫‡∑ö‡∂Ø‡∑ì ‡∂Ω‡∑ê‡∂∂‡∑î‡∂´‡∑î ‡∑Ñ‡∑è‡∑É‡∑ä‚Äç‡∂∫‡∂¢‡∂±‡∂ö‡∂∏ ‡∂Ø‡∂¨‡∑î‡∑Ä‡∂∏ ‡∂ö‡∑î‡∂∏‡∂ö‡∑ä‡∂Ø?",
    "‡∂î‡∂∂‡∂ß ‡∑Ä‡∑ô‡∂±‡∂≠‡∑ä ‡∂ö‡∑ô‡∂±‡∑ô‡∂ö‡∑î‡∂ß ‡∂¥‡∑ê‡∑Ä‡∑É‡∑ì‡∂∏‡∂ß ‡∂Ö‡∑Ä‡∑Å‡∑ä‚Äç‡∂∫ ‡∑Ä‡∑ñ ‡∂±‡∂∏‡∑î‡∂≠‡∑ä ‡∂ö‡∑í‡∑É‡∑í‡∂Ø‡∑è ‡∂±‡∑ú‡∂ö‡∑ì ‡∂Ø‡∑ô‡∂∫‡∂ö‡∑ä ‡∂ö‡∑î‡∂∏‡∂ö‡∑ä‡∂Ø?",
    "‡∂î‡∂∂ ‡∂ª‡∑Ñ‡∑É‡∑í‡∂±‡∑ä Google/YouTube ‡∑Ñ‡∑í Search ‡∂ö‡∂ª ‡∂á‡∂≠‡∑í ‡∂Ω‡∑ê‡∂¢‡∑ä‡∂¢‡∑è ‡∑É‡∑Ñ‡∂ú‡∂≠‡∂∏ ‡∂Ø‡∑ô‡∂∫ ‡∂ö‡∑î‡∂∏‡∂ö‡∑ä‡∂Ø?",
    "‡∂Ö‡∂Ø ‡∂î‡∂∫‡∑è ‡∂ö‡∑í‡∂∫‡∂¥‡∑î ‡∂ë‡∂ö ‡∂Ø‡∑ô‡∂∫‡∂ö‡∑ä ‡∂Ö‡∑Ñ‡∑ù‡∑É‡∑í ‡∂ö‡∂ª‡∂±‡∑ä‡∂± ‡∂¥‡∑î‡∑Ö‡∑î‡∑Ä‡∂±‡∑ä ‡∂±‡∂∏‡∑ä, ‡∂í ‡∂∏‡∑ú‡∂ö‡∂ö‡∑ä‡∂Ø?",
    "‡∂î‡∂∂ ‡∂ö‡∑Ä‡∂Ø‡∑è ‡∑Ñ‡∑ù ‡∑É‡∂∏‡∑ä‡∂∂‡∂±‡∑ä‡∂∞ ‡∑Ä‡∑ì ‡∂á‡∂≠‡∑í ‡∑Ä‡∑í‡∑Å‡∑è‡∂Ω‡∂≠‡∂∏ ‡∑Ä‡∑ê‡∂ª‡∂Ø‡∑í ‡∑Ä‡∑ê‡∂ß‡∑Ñ‡∑ì‡∂∏ ‡∂ö‡∑î‡∂∏‡∂ö‡∑ä‡∂Ø?",
    "‡∂î‡∂∂‡∂ß ‡∂ö‡∑ä‡∑Ç‡∂´‡∑í‡∂ö‡∑Ä ‡∂â‡∑Ä‡∂≠‡∑ä ‡∂ö‡∂ª ‡∂ú‡∑ê‡∂±‡∑ì‡∂∏‡∂ß ‡∂Ö‡∑Ä‡∑Å‡∑ä‚Äç‡∂∫ ‡∂ë‡∂ö‡∑ä ‡∂¥‡∑î‡∂ª‡∑î‡∂Ø‡∑ä‡∂Ø‡∂ö‡∑ä ‡∂±‡∂∏‡∑ä ‡∂ö‡∂ª‡∂±‡∑ä‡∂±."
];

const dares = [
    "‡∂î‡∂∂‡∑ö Profile Picture ‡∂ë‡∂ö ‡∑Ä‡∑í‡∂±‡∑è‡∂©‡∑í 10‡∂ö‡∑ä ‡∂∏‡∂∏ ‡∂ë‡∑Ä‡∂± ‡∂ë‡∂ö ‡∂Ø‡∑è‡∂ú‡∂±‡∑ä‡∂±.",
    "‡∂∏‡∑ô‡∂∏ Group ‡∂ë‡∂ö‡∑ö ‡∑É‡∑í‡∂ß‡∑í‡∂± ‡∂ö‡∑ô‡∂±‡∑ô‡∂ö‡∑î‡∂ß Funny Voice Note ‡∂ë‡∂ö‡∂ö‡∑ä ‡∂∫‡∑Ä‡∂±‡∑ä‡∂±.",
    "‡∂ú‡∑ò‡∂¥‡∑ä ‡∂ë‡∂ö‡∑ö ‡∑É‡∑í‡∂ß‡∑í‡∂± ‡∂Ö‡∂±‡∑í‡∂≠‡∑ä ‡∂Ö‡∂∫‡∂ß ‡∑Ä‡∑í‡∑Ñ‡∑í‡∑Ö‡∑î ‡∂ö‡∂≠‡∑è‡∑Ä‡∂ö‡∑ä ‡∂ö‡∑í‡∂∫‡∂±‡∑ä‡∂±.",
    "‡∂î‡∂∂‡∑ö ‡∂¥‡∑ä‚Äç‡∂ª‡∑í‡∂∫‡∂≠‡∂∏ ‡∂ú‡∑ì‡∂≠‡∂∫‡∑ö ‡∂ú‡∑è‡∂∫‡∂±‡∂∫ ‡∑Ñ‡∑ê‡∂ö‡∑í‡∂≠‡∑è‡∂ö‡∑ä ‡∑Ñ‡∂∫‡∑í‡∂∫‡∑ô‡∂±‡∑ä ‡∑Ñ‡∂¨ ‡∑É‡∂ß‡∑Ñ‡∂±‡∂ö‡∑í‡∂±‡∑ä ‡∂ú‡∑è‡∂∫‡∂±‡∑è ‡∂ö‡∂ª‡∂±‡∑ä‡∂±.",
    "‡∂â‡∂∏‡∑ù‡∂¢‡∑í ‡∂¥‡∂∏‡∂´‡∂ö‡∑ä ‡∂∑‡∑è‡∑Ä‡∑í‡∂≠‡∑è ‡∂ö‡∂ª‡∂∏‡∑í‡∂±‡∑ä ‡∂î‡∂∂‡∂ú‡∑ö ‡∂ä‡∑Ö‡∂ü ‡∂¥‡∂´‡∑í‡∑Ä‡∑í‡∂© 5 ‡∂ß‡∂∫‡∑í‡∂¥‡∑ä ‡∂ö‡∂ª‡∂±‡∑ä‡∂± (‡∑Ä‡∂†‡∂± ‡∂±‡∑ê‡∂≠).",
    "‡∂î‡∂∂‡∑ö ‡∑É‡∂∏‡∑ä‡∂∂‡∂±‡∑ä‡∂∞‡∂≠‡∑è ‡∂Ω‡∑ê‡∂∫‡∑í‡∑É‡∑ä‡∂≠‡∑î‡∑Ä‡∑ö ‡∂Ö‡∑Ñ‡∂π‡∑î ‡∂¥‡∑î‡∂Ø‡∑ä‡∂ú‡∂Ω‡∂∫‡∑ô‡∂ö‡∑î‡∂ß ‡∂ö‡∂≠‡∑è ‡∂ö‡∂ª ‡∂î‡∂∂ ‡∂¥‡∑ì‡∑É‡∑è ‡∂ë‡∂ö‡∂ö‡∑ä ‡∂á‡∂´‡∑Ä‡∑î‡∂∏‡∑ä ‡∂ö‡∂ª‡∂± ‡∂∂‡∑Ä ‡∂∏‡∑Ä‡∑è‡∂¥‡∑è‡∂±‡∑ä‡∂±.",
    "‡∂∫‡∑è‡∂Ω‡∑î‡∑Ä‡∑ô‡∂ö‡∑î‡∂ú‡∑ö (Group ‡∂ë‡∂ö‡∑ö ‡∂±‡∑ê‡∂≠‡∑í) WhatsApp Status 5‡∂ö‡∂ß ‡∑Ä‡∑í‡∑Ñ‡∑í‡∂Ω‡∑î Reply ‡∂∫‡∑Ä‡∂±‡∑ä‡∂±.",
    "‡∂ö‡∂´‡∑ä‡∂©‡∑è‡∂∫‡∂∏‡∑ö ‡∂¥‡∑î‡∂Ø‡∑ä‡∂ú‡∂Ω‡∂∫‡∑í‡∂±‡∑ä ‡∂≠‡∑í‡∂Ø‡∑ô‡∂±‡∑ô‡∂ö‡∑î ‡∑É‡∂≥‡∑Ñ‡∂±‡∑ä ‡∂ö‡∂ª ‡∂î‡∑Ä‡∑î‡∂±‡∑ä‡∂ß ‡∂Ö‡∂Ø‡∑ä‡∑Ä‡∑í‡∂≠‡∑ì‡∂∫ ‡∂Ü‡∂ö‡∑è‡∂ª‡∂∫‡∂ö‡∑í‡∂±‡∑ä ‡∂¥‡∑ä‚Äç‡∂ª‡∑Å‡∂Ç‡∑É‡∑è ‡∂ö‡∂ª‡∂±‡∑ä‡∂±.",
    "‡∂ä‡∑Ö‡∂ü ‡∂∏‡∑í‡∂±‡∑í‡∂≠‡∑ä‡∂≠‡∑î 5 ‡∑É‡∂≥‡∑Ñ‡∑è, ‡∑É‡∑ë‡∂∏ ‡∂¥‡∂´‡∑í‡∑Ä‡∑í‡∂©‡∂∫‡∂ö‡∂ß‡∂∏ '‡∂∏‡∂∏ ‡∂ë‡∂ö‡∂ü‡∂∫‡∑í!' ‡∂∫‡∂±‡∑î‡∑Ä‡∑ô‡∂±‡∑ä ‡∂¥‡∑í‡∑Ö‡∑í‡∂≠‡∑î‡∂ª‡∑î ‡∂Ø‡∑ô‡∂±‡∑ä‡∂±.",
    "‡∂ú‡∑í‡∑Ñ‡∑í‡∂±‡∑ä ‡∂î‡∂∫‡∑è‡∂ú‡∑ö ‡∂Ø‡∑ê‡∂±‡∂ß ‡∂≠‡∑í‡∂∫‡∑ô‡∂± ‡∑Ü‡∑ù‡∂±‡∑ä ‡∂ª‡∑í‡∂±‡∑ä‡∂ú‡∑ä‡∂ß‡∑ù‡∂±‡∑ä ‡∂ë‡∂ö ‡∑Ä‡∑í‡∑Ñ‡∑í‡∂Ω‡∑î ‡∑É‡∂≠‡∑ô‡∂ö‡∑ä‡∂ú‡∑ô ‡∑Ñ‡∂¨‡∂ö‡∂ß ‡∑Ä‡∑ô‡∂±‡∑É‡∑ä ‡∂ö‡∂ª‡∂±‡∑ä‡∂±."
];

// üé≤ Random Item Selector
const getRandomItem = (array) => array[Math.floor(Math.random() * array.length)];

cmd(
    {
        pattern: "tod",
        react: "üòà",
        desc: "Play Truth or Dare. Get a random challenge or question.",
        category: "fun",
        filename: __filename,
    },
    async (
        zanta,
        mek,
        m,
        {
            from,
            reply,
            args,
            prefix = config.PREFIX || '.',
        }
    ) => {
        try {
            const input = args.join(' ').toLowerCase().trim();

            if (!input) {
                let instruction = `üòà *Truth or Dare* üòà\n\n`;
                instruction += `‡∂ö‡∂ª‡∑î‡∂´‡∑è‡∂ö‡∂ª ‡∂≠‡∑ù‡∂ª‡∂±‡∑ä‡∂±:\n`;
                instruction += `*${prefix}tod truth* - ‡∂á‡∂≠‡∑ä‡∂≠ ‡∂ö‡∑í‡∂∫‡∂±‡∑ä‡∂±\n`;
                instruction += `*${prefix}tod dare* - ‡∂Ö‡∂∑‡∑í‡∂∫‡∑ù‡∂ú‡∂∫‡∂ö‡∑ä ‡∂ö‡∂ª‡∂±‡∑ä‡∂±\n`;
                return reply(instruction);
            }

            let response = '';
            let emoji = '';

            if (input.includes('truth')) {
                // Truth Command
                const randomTruth = getRandomItem(truths);
                emoji = 'ü§•';
                response = `**${emoji} TRUTH: ‡∂á‡∂≠‡∑ä‡∂≠ ‡∂ö‡∑í‡∂∫‡∂±‡∑ä‡∂±**\n\n${randomTruth}\n\n*(@${m.sender.split('@')[0]} ‡∑É‡∂≥‡∑Ñ‡∑è)*`;

            } else if (input.includes('dare')) {
                // Dare Command
                const randomDare = getRandomItem(dares);
                emoji = 'üî•';
                response = `**${emoji} DARE: ‡∂Ö‡∂∑‡∑í‡∂∫‡∑ù‡∂ú‡∂∫**\n\n${randomDare}\n\n*(@${m.sender.split('@')[0]} ‡∑É‡∂≥‡∑Ñ‡∑è)*`;

            } else {
                return reply(`‚ùå ‡∂ö‡∂ª‡∑î‡∂´‡∑è‡∂ö‡∂ª 'truth' ‡∑Ñ‡∑ù 'dare' ‡∂Ω‡∑ô‡∑É ‡∂±‡∑í‡∑Ä‡∑ê‡∂ª‡∂Ø‡∑í‡∑Ä ‡∂∫‡∑Ä‡∂±‡∑ä‡∂±. ‡∂ã‡∂Ø‡∑è: *${prefix}tod truth*`);
            }

            // Mentions ‡∂á‡∂≠‡∑î‡∑Ö‡∂≠‡∑ä ‡∂ö‡∑í‡∂ª‡∑ì‡∂∏‡∂ß
            const options = { 
                mentions: [m.sender] 
            };

            return zanta.sendMessage(from, { text: response, contextInfo: options }, { quoted: mek });


        } catch (err) {
            console.error("Truth or Dare Command Error:", err);
            reply("‚ùå Truth or Dare Command ‡∂ë‡∂ö ‡∂ö‡∑ä‚Äç‡∂ª‡∑í‡∂∫‡∑è‡∂≠‡∑ä‡∂∏‡∂ö ‡∂ö‡∑í‡∂ª‡∑ì‡∂∏‡∑ö‡∂Ø‡∑ì ‡∂Ø‡∑ù‡∑Ç‡∂∫‡∂ö‡∑ä ‡∑É‡∑í‡∂Ø‡∑î‡∑Ä‡∑í‡∂∫.");
        }
    }
);
